# Xemelgo Asset Route API Documentation

## Version 1.1 — August 2024

© 2024 Xemelgo, Inc.  
1-888-907-2884  
[www.xemelgo.com](https://www.xemelgo.com)  
support@xemelgo.com  

---

## Table of Contents

1. [Release Versions](#release-versions)
2. [Authentication - Login API](#authentication---login-api)
3. [Get Asset Route API](#get-asset-route-api)
4. [Errors](#errors)

---

## Release Versions

| Version | Description            | Author          | Release Date |
|---------|------------------------|----------------|--------------|
| 1.0     | Get Asset Route API    | Renuka Agrawal | 09/09/2024   |

---

## Authentication - Login API

To access the GraphQL APIs, users must first authenticate using the Xemelgo Login REST API.

### Endpoint Details
- **URL:** `https://rest.api.xemelgo.com/login`
- **Method:** `POST`

### Request Body
```json
{
  "email": "base64_encoded_email",
  "password": "base64_encoded_password"
}
```

### Response Body
```json
{
  "AccessToken": "token123",
  "ExpiresIn": 3600,
  "TokenType": "Bearer",
  "RefreshToken": "refreshToken",
  "IdToken": "idToken123"
}
```

Use the `IdToken` as the authorization header for all API requests.

---

## Get Asset Route API

The Get Asset Route API retrieves asset details and status updates.

### Endpoint Details
- **URL:** `https://api.xemelgo.com/graphql`
- **Method:** `POST`

### Request Headers
```http
Authorization: Bearer {IdToken}
```

### Request Body
```graphql
query assetRoute($id: String!, $startDate: AWSTimestamp, $endDate: AWSTimestamp) {
  assetRoute(input: { id: $id, startDate: $startDate, endDate: $endDate }) {
    route {
      location {
        id
        name
      }
      state
      startDate
      endDate
      duration
    }
  }
}
```

### Example Input
```json
{
  "id": "120",
  "startDate": 1719730800000,
  "endDate": 1719903600000
}
```

### Example Response
```json
{
  "data": {
    "assetRoute": {
      "route": [
        {
          "location": { "id": "LU3000EX", "name": "LU3000EX" },
          "state": "onhand",
          "startDate": 1719864278922,
          "endDate": 1719864496290,
          "duration": 217368
        }
      ]
    }
  }
}
```

---

## Errors

| Error                   | Code | Description         |
|-------------------------|------|---------------------|
| Expired token          | 401  | Unauthorized       |
| Invalid token          | 401  | Unauthorized       |
| Missing Auth Header    | 401  | Unauthorized       |

